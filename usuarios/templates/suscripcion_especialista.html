{% extends 'home_base2.html' %}

{% load static %}

{% block title %}Proxima Hora Suscripcion{% endblock %}

{% block content %}

<!-- Custom JS -->
<script type="text/javascript" src="{% static 'js/usuarios/suscripcion_especialista.js' %}"></script>  

<!-- miga de pan -->
<div style="display: flex;
        padding: 16px 152px;
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        align-self: stretch;">
  <ul class="breadcrumb">
    <li><a href="/home">Inicio</a></li>
    <li>Suscripción Especialista</li>
  </ul>
</div>

{% csrf_token %}

<div class="row container mx-4 mb-5"  id="divpago1" name="divpago1">
  <div class="modal-dialog">
    <div class="modal-content container-fluid">
      <div class="modal-body">
        <div style="max-width: 100%;">
          <div class="py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
              <div class="col col-xl-10">
                <div class="card" style="border-radius: 1rem;">
                  <div class="d-flex align-items-center mb-3 pb-1">
                    <span class="mb-0"><img src="{% static 'img/logoph-01.svg' %}" width="100" /></span>
                  </div>                                   
                  <div class="row g-0">
                    <h3 style="text-align: center;">SUSCRIPCION ESPECIALISTA </h3>
                    <div class="col-md-12 d-flex align-items-center">
                      <div class="card-body p-4 p-lg-5 text-black">
                        <div class="input-group flex-nowrap mx-4">
                          <div class="d-flex flex-column">
                            <div class="d-flex flex-column mb-6">
                              <label for="rutcontacto" class="form-label">R.U.T.
                                <input type="text" readonly class="form-control" id="rutcontacto" name="rutcontacto" value="{{solicitante.rut}}" />
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <label for="nombrecontacto" class="form-label">Nombre 
                                <input type="text" readonly class="form-control" id="nombrecontacto" name="nombrecontacto" value="{{solicitante.nombre}}" />
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <label for="apellidocontacto" class="form-label">Apellido 
                                <input type="text" readonly class="form-control" id="apellidocontacto" name="apellidocontacto" value="{{solicitante.apellido}}" />
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <label for="mailcontacto" class="form-label">Mail
                                <input type="text" readonly class="form-control" id="mailcontacto" name="mailcontacto" value="{{solicitante.email}}" />
                              </label>
                            </div>
                            <hr>
                            <div class="d-flex flex-column mb-6">
                              <label for="plan" class="form-label">Planes
                                <select required="required" class="form-select w-auto" name="planpago" id="planpago" >
                                  <option value="0" >Seleccione Plan</option>
                                  {% for plan in planes %}    
                                      <option value="{{plan.id}}" >{{plan.nombre}}</option>
                                  {% endfor %}
                                </select>
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <button type="button" class="btn boton" data-bs-toggle="modal" data-bs-target="#PagoModal" >
                                Continuar
                              </button>
                            </div> 
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row container mx-4 mb-5"  id="divpago2" name="divpago2">
  <div class="modal-dialog">
    <div class="modal-content container-fluid">
      <div class="modal-body">
        <div style="max-width: 100%;">
          <div class="py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
              <div class="col col-xl-10">
                <div class="card" style="border-radius: 1rem;">
                  <div class="d-flex align-items-center mb-3 pb-1">
                    <span class="mb-0"><img src="{% static 'img/logoph-01.svg' %}" width="100" /></span>
                  </div>                                   
                  <div class="row g-0">
                    <h3 style="text-align: center;">Pago Suscripción</h3>
                    <div class="col-md-12 d-flex align-items-center">
                      <div class="card-body p-4 p-lg-5 text-black">
                        <div class="input-group flex-nowrap mx-4">
                          <div class="d-flex flex-column">
                            <div class="d-flex flex-column mb-6">
                              <label class="form-label col-sm-10">Ha seleccionado el Plan <span id="planselec"></span>.
                                <br /> Suscripción válida desde el <span id="finicio"></span>
                                <br /> hasta el <span id="ftermino" ></span>
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <label for="montopago" class="form-label">Monto Plan $
                                <input type="text" readonly class="form-control" id="montopago" name="montopago" />
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <label for="subtotalpago" class="form-label">Neto $
                                <input type="text" readonly class="form-control" id="subtotalpago" name="subtotalpago" />
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <label for="ivapago" class="form-label">I.V.A. $
                                <input type="text" readonly class="form-control" id="ivapago" name="ivapago" />
                              </label>
                            </div>
                            <hr>
                            <div class="d-flex flex-column mb-6">
                              <label for="totalpago" class="form-label">Total $
                                <input type="text" readonly class="form-control" id="totalpago" name="totalpago" />
                              </label>
                            </div>
                            <div class="d-flex flex-column mb-6">
                              <button type="button" class="btn boton" data-bs-toggle="modal" data-bs-target="#DivRecepcionPago">
                                Ir a Pagar
                              </button>
                            </div> 
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal  Fin Suscripcion Especialista-->
<div class="modal fade" id="DivRecepcionPago" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Formas de Pago</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form class="modal-body" name="formulariopago" id="formulariopago" method="post" action="/home"> 
        {% csrf_token %}
        <div data-mdb-input-init class="form-outline mb-4">
          <label for="formapago" class="form-label">Forma de Pago
            <select required="required" class="form-select w-auto" name="formapago" id="formapago" >
  <!--     VISITAR         https://publico.transbank.cl/productos-y-servicios/soluciones-para-ventas-internet/webpay-cl VISITAR -->  
              <option value="0" >Seleccione Forma de Pago</option>
              {% for fpago in fpagos %}    
                <option value="{{fpago.id}}" >{{fpago.nombre}}</option>
              {% endfor %}
            </select>
          </label>
        </div>
        <div class="pt-1 mb-4">
          <button type="button" class="btn boton btn-lg btn-block" id="btnpagar"  name="btnpagar">Pagar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- modal de Confirmacion -->
<div class="modal modallogin fade" id="ModalConfirmaPago" name="ModalConfirmaPago" tabindex="-1" aria-labelledby="ModalLogin" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div style="max-width: 100%;">
          <div class="container py-2 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
              <div class="col col-xl-10">
                <div class="card" style="border-radius: 0.5rem;">
                  <div class="row g-0">
                    <div class="col d-flex align-items-center">
                      <div class="card-body p-2 p-lg-2 text-black myform">
                        <div class="d-flex align-items-center mb-3 pb-1">
                          <span class="mb-0"><img src="{% static 'img/logoph-01.svg' %}" width="100" /></span>
                        </div>
                        <div class="d-flex justify-content-center">
                          <h4>Suscripción a Próxima Hora</h4>
                        </div>
                        <div class="modal-body">
                          <div id="msgcontinuarpago1" name="msgcontinuarpago1">
                            ¿Desea continuar con el Pago de su suscripción en Proxima Hora?
                            <div></div>
                            <div class="pt-1 mb-4">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal" id="koenviopago" name="koenviopago">Cancelar</button>
                              <button type="button" class="btn btn-primary" id="okenviopago" name="okenviopago">Continuar</button>
                            </div>
                          </div>
                          <div id="divconfirmpago" name="divconfirmpago">
                            <div id="msgpagoconf" class="alert alert-warning alert-dismissible fade show text-center" role="alert">
                              <strong><span id="msgpagoconf1"></span></strong>
                            </div>
                            <div class="pt-1 mb-4">
                              <button type="button" class="btn btn-primary" id="oksubmitformpago"  name="oksubmitformpago">Terminar</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}